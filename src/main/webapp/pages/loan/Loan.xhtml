<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
>
  <h:head>
    <f:facet name="first">
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
      />
      <meta name="apple-mobile-web-app-capable" content="yes" />

      <h:outputStylesheet
        name="primeflex/3.3.1/primeflex.css"
        library="webjars"
      />
    </f:facet>
    <style>
      .container {
        margin: 5px auto;
        width: auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        /*box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);*/
        text-align: center;
        margin-right: 10px;
      }

      .logo {
        width: auto;
        height: auto;
        margin: 0 auto;
        display: block;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      .header {
        width: 100%;
        height: 100vh;
        background: #f5f5f5;
      }

      .side-nav {
        width: 250px;
        height: 130%;
        background-color: #f4fafe;
        position: fixed;
        top: 0;
        left: 0;
        padding: 20px 30px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      .logo {
        display: block;
        margin-bottom: 10px;
      }

      .logo-img {
        width: 170px;
        margin-top: 20px;
      }
      .nav-image {
        width: 30px;
        height: 30px;
      }

      .nav-links {
        list-style: none;
        position: relative;
      }

      .nav-links li {
        padding: 10px 0;
      }

      .nav-links li a {
        color: #000000;
        text-decoration: none;
        padding: 10px 14px;
        display: flex;
        align-items: center;
      }

      .nav-links li a i {
        font-size: 22px;
        margin-right: 20px;
      }

      .active {
        background: #7c7a7a;
        width: 100%;
        height: 47px;
        position: absolute;
        left: 0;
        top: 2.6%;
        z-index: -1;
        border-radius: 6px;
        box-shadow: 0 5px 10px rgba(255, 255, 255, 0.4);
        display: none;
        transition: top 0.5s;
      }

      .nav-links li:hover a {
        color: darkblue;
        transition: 0.3s;
      }

      .nav-links li:hover ~ .active {
        display: block;
      }

      .nav-links li:nth-child(1):hover ~ .active {
        top: 2.6%;
      }

      .nav-links li:nth-child(2):hover ~ .active {
        top: 19.2%;
      }

      .nav-links li:nth-child(3):hover ~ .active {
        top: 35.8%;
      }

      .nav-links li:nth-child(4):hover ~ .active {
        top: 52.4%;
      }

      .nav-links li:nth-child(5):hover ~ .active {
        top: 69%;
      }

      .nav-links li:nth-child(6):hover ~ .active {
        top: 85.6%;
      }
    </style>
  </h:head>
  <h:body>
    <div class="container" style="background-color: white; width: 1200px">
      <h:form style="background-color: white">
        <p:menubar style="background-color: white">
          <f:facet name="options">
            <div class="ui-input-icon-left mr-2">
              <i class="pi pi-fw pi-search" />
              <p:inputText placeholder="Search" />
            </div>
          </f:facet>

          <p:submenu label="#{loginForm.currentUser.name}"
            icon="pi pi-fw pi-user"
            style="float: right"
          >
            <p:menuitem value="change password" icon="pi pi-fw pi-user-plus" />
            <p:menuitem value="Report Issue" icon="" />
          </p:submenu>
        </p:menubar>
      </h:form>
    </div>
    <div class="side-nav">
      <div style="position: sticky">
        <a href="#" class="logo">
          <h:graphicImage
            url="/resources/images/logo.png"
            styleClass="logo-img"
          />
        </a>
        <ul class="nav-links">
          <li>
            <p:link outcome="/pages/dashboard/Dashboard.xhtml">
              <h:graphicImage
                url="/resources/images/home.png"
                styleClass="nav-image"
              />
              <p style="padding-left: 8px">HOME</p>
            </p:link>
          </li>
          <li>
            <p:link outcome="/pages/loan/Loan.xhtml">
              <h:graphicImage
                url="/resources/images/loan.png"
                styleClass="nav-image"
              />
              <p style="padding-left: 8px">APPLY FOR LOAN</p>
            </p:link>
          </li>
          <li>
            <p:link outcome="/pages/transaction/Transaction.xhtml">
              <h:graphicImage
                url="/resources/images/transaction.png"
                styleClass="nav-image"
              />
              <p style="padding-left: 8px">TRANSACTIONS</p>
            </p:link>
          </li>
          <li>
            <p:link outcome="/pages/account/Account.xhtml">
              <h:graphicImage
                      url="/resources/images/account.png"
                      styleClass="nav-image"
              />
              <p style="padding-left: 8px">MY ACCOUNT</p>
            </p:link>
          </li>
          <li>
            <p:link outcome="/pages/history/History.xhtml">
              <h:graphicImage
                      url="/resources/images/History.png"
                      styleClass="nav-image"
              />
              <p style="padding-left: 8px">HISTORY</p>
            </p:link>
          </li>
          <li>
            <p:commandLink action="#{loginForm.doLogout()}">
              <h:graphicImage
                      url="/resources/images/shutdown.png"
                      styleClass="nav-image"
              />
              <p style="padding-left: 8px">LOGOUT</p>
            </p:commandLink>
          </li>
          <li class="active"></li>
        </ul>
      </div>
    </div>

    <div class="container" style="position: relative; margin-left: 280px">
      <div class="card flex justify-content-center">
        <f:view>
          <div
            class="w-9 h-auto border-50 bg-blue-50 shadow-1 p-2 border-round-sm"
          >
            <h:form>
              <div style="margin: 20px">
                <h3>Financial Details</h3>
              </div>

              <div class="formgrid grid" style="margin: 30px">
                <div class="field col-12 md:col-6">
                  <label for="bank">Amount Required</label>
                  <p:inputText
                    id="bank"
                    type="number"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                    required="required"
                    value="#{loanBean.loan.loanAmount}"
                  />
                </div>
                <div class="field col-12 md:col-6">
                  <label for="account">Amount to Pay per month</label>
                  <p:inputText
                    id="account"
                    type="number"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                    required="required"
                    value="#{loanBean.loan.amountPaidPerMonth}"
                  />
                </div>

                <div class="field col-12 md:col-6">
                  <label for="income">Source of Income</label>
                  <p:inputText
                    id="income"
                    type="text"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                    required="required"
                    value="#{loanBean.loan.sourceOfIncome}"
                  />
                </div>
                <div class="field col-12 md:col-6">
                  <label for="date1">Date expected to have loan finished</label>
                  <p:inputText
                    id="date1"
                    style="appearance: auto"
                    type="date"
                    required="required"
                    value="#{loanBean.loan.duration}"
                    placeholder="select date"
                    styleClass="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                  />
                </div>

                <div class="field col-12">
                  <label for="date1">Reason for getting the loan</label>
                  <p:inputTextarea
                    rows="6"
                    col="33"
                    styleClass="field col-12"
                    required="required"
                    value="#{loanBean.loan.reason}"
                  />
                </div>

                <div class="field col-12 flex justify-content-center">
                  <p:commandButton update="message" value="APPLY" icon="pi pi-check-square" action="#{loanBean.saveLoan()}" />
                </div>
              </div>
              <p:growl id="message" showDetail="true" />
            </h:form>
          </div>
        </f:view>
      </div>



      <div style="margin-top: 50px; ">
        <h2 style="margin-bottom: 30px">LOAN REQUESTS</h2>
        <h:form>
          <p:dataTable var="loans" value="#{loanBean.userLoans}" widgetVar="AllPLoanTable"
                       emptyMessage="No customers found with given criteria" id="AllPLoanTable"
          >

            <f:facet name="header">
              <div class="flex justify-content-end">
                <p:inputText id="globalf" onkeyup="PF('AllPLoanTable').filter()" style="width:300px"
                             placeholder="Search all fields using global function" />
              </div>
            </f:facet>

            <p:column headerText="Account Number" sortBy="#{loans.account.accountNumber}" >
              <span class="flag flag-#{loans.account.accountNumber}" style="width: 30px; height: 20px" />
              <h:outputText style="vertical-align: middle; margin-left: 2px" value="#{loans.account.accountNumber}" />
            </p:column>

            <p:column  headerText="Loan status" filterable="false">
              <h:outputText style="vertical-align: middle; margin-left: 2px" value="#{loans.status}" />
            </p:column>

            <p:column headerText="Date Created" sortBy="#{loans.sourceOfIncome}">

              <h:outputText style="vertical-align: middle; margin-left: 2px" value="#{loans.dateCreated}" />
            </p:column>

            <p:column headerText="FullPaymentBy" sortBy="#{loans.duration}}">

              <h:outputText style="vertical-align: middle; margin-left: 2px" value="#{loans.duration}" />
            </p:column>


            <p:column  headerText="AmountPerMonth" filterable="false">
              <span>#{loans.amountPaidPerMonth}</span>
            </p:column>

            <p:column  headerText="Total Loan Amount" filterable="false">
              <span >#{loans.totalLoanAmount}</span>
            </p:column>

            <p:growl id="messages" showDetail="true"/>

          </p:dataTable>
        </h:form>
      </div>

      <p:fieldset
        legend="ABOUT US"
        toggleable="true"
        toggleSpeed="500"
        style="
          width: auto;
          margin-left: 30px;
          margin-top: 40px;
          background-color: black;
          color: white;
        "
      >
        <p:ajax event="toggle" />
        <p class="m-0">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
          minim veniam, quis nostrud exercitation ullamco laboris nisi ut
          aliquip ex ea commodo consequat. Duis aute irure dolor in
          reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
          pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
          culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum
          dolor sit amet, consectetur adipisicing elit. Inventore sed
          consequuntur error repudiandae numquam deserunt quisquam repellat
          libero asperiores earum nam nobis, culpa ratione quam perferendis
          esse, cupiditate neque quas! Lorem ipsum dolor sit amet, consectetur
          adipisicing elit. Inventore sed consequuntur error repudiandae numquam
          deserunt quisquam repellat libero asperiores earum nam nobis, culpa
          ratione quam perferendis esse, cupiditate neque quas! Lorem ipsum
          dolor sit amet, consectetur adipisicing elit. Inventore sed
          consequuntur error repudiandae numquam deserunt quisquam repellat
          libero asperiores earum nam nobis, culpa ratione quam perferendis
          esse, cupiditate neque quas!Lorem ipsum dolor sit amet, consectetur
          adipisicing elit. Inventore sed consequuntur error repudiandae numquam
          deserunt quisquam repellat libero asperiores earum nam nobis, culpa
          ratione quam perferendis esse, cupiditate neque quas!
        </p>
      </p:fieldset>
    </div>
  </h:body>
</html>
